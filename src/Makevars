CXX_STD = CXX20

## Compiler flags/defines:
PKG_CPPFLAGS =  -I/usr/X11/include -I/opt/X11/include -I/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libopenexr/include/OpenEXR -I/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libimath/include/Imath -I/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libptex/include -I/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libdeflate/include -I/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libnanovdb/include -I'/Applications/oidn-2.3.1.arm64.macos/include' 
PKG_LIBS =  -L/usr/X11/lib -lX11  -L/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libopenexr/lib/arm64  -lIlmThread-3_4 -lOpenEXR-3_4 -lIex-3_4 -lOpenEXRCore-3_4 -lOpenEXRUtil-3_4 -L/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libimath/lib/arm64 -lImath-3_2 -L/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libptex/lib/arm64/ptex -lPtex -L/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libdeflate/lib/arm64 -ldeflate -L/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/libnanovdb/include -L/Applications/oidn-2.3.1.arm64.macos/lib -Wl,-rpath,/Applications/oidn-2.3.1.arm64.macos/lib -lOpenImageDenoise -ltbb 
PKG_CXXFLAGS = -D RAY_REPRODUCE_PERLIN -DSTRICT_R_HEADERS -DPBRT_IS_OSX -DPBRT_HAVE_POSIX_MEMALIGN -DRAY_HAS_X11 -DHAS_OIDN -DHAS_NEON -DRAYSIMD -DRAYSIMDVECOFF  -fvisibility=hidden -fvisibility-inlines-hidden -march=armv8-a+simd

## Files to compile:
SOURCES=PrintClassSizes.cpp RcppExports.cpp define_functions.cpp render_animation_rcpp.cpp render_scene_rcpp.cpp sky.cpp test-runner.cpp tonemap.cpp  core/PreviewDisplay.cpp core/adaptivesampler.cpp core/buildscene.cpp core/bvh.cpp core/camera.cpp core/color.cpp core/integrator.cpp hitables/box.cpp hitables/csg.cpp hitables/curve.cpp hitables/cylinder.cpp hitables/disk.cpp hitables/ellipsoid.cpp hitables/hitable.cpp hitables/hitablelist.cpp hitables/infinite_area_light.cpp hitables/instance.cpp hitables/mesh3d.cpp hitables/plymesh.cpp hitables/raymesh.cpp hitables/rectangle.cpp hitables/sphere.cpp hitables/triangle.cpp hitables/trianglemesh.cpp hitables/trimesh.cpp materials/constant.cpp materials/material.cpp materials/microfacetdist.cpp materials/texture.cpp materials/texturecache.cpp math/RayMatrix.cpp math/aabb.cpp math/animatedtransform.cpp math/bounds.cpp math/calcnormals.cpp math/calctangents.cpp math/displacement.cpp math/distributions.cpp math/filter.cpp math/loopsubdiv.cpp math/math.cpp math/matrix.cpp math/noise.cpp math/pdf.cpp math/perlin.cpp math/quaternion.cpp math/rng.cpp math/sampler.cpp math/simd.cpp math/transform.cpp math/transformcache.cpp math/vectypes.cpp utils/assert.cpp utils/debug.cpp utils/raylog.cpp   ext/lodepng/lodepng.cpp ext/miniply/miniply.cpp ext/rply/rply.cpp ext/sky/ArHosekSkyModel.cpp ext/sky/atmosphere.cpp ext/sky/cie.cpp ext/sky/hosek.cpp  ext/pbrt/bsdf.cpp ext/pbrt/bssrdf.cpp ext/pbrt/bxdfs.cpp ext/pbrt/cameras.cpp ext/pbrt/cpu/aggregates.cpp ext/pbrt/cpu/integrators.cpp ext/pbrt/cpu/primitive.cpp ext/pbrt/cpu/render.cpp ext/pbrt/film.cpp ext/pbrt/filters.cpp ext/pbrt/interaction.cpp ext/pbrt/lights.cpp ext/pbrt/lightsamplers.cpp ext/pbrt/materials.cpp ext/pbrt/media.cpp ext/pbrt/options.cpp ext/pbrt/paramdict.cpp ext/pbrt/parser.cpp ext/pbrt/pbrt.cpp ext/pbrt/ray.cpp ext/pbrt/samplers.cpp ext/pbrt/scene.cpp ext/pbrt/shapes.cpp ext/pbrt/spectrums/rgbspectrum_aces.cpp ext/pbrt/spectrums/rgbspectrum_dci_p3.cpp ext/pbrt/spectrums/rgbspectrum_rec2020.cpp ext/pbrt/spectrums/rgbspectrum_srgb.cpp ext/pbrt/textures.cpp ext/pbrt/util/args.cpp ext/pbrt/util/buffercache.cpp ext/pbrt/util/check.cpp ext/pbrt/util/color.cpp ext/pbrt/util/colorspace.cpp ext/pbrt/util/display.cpp ext/pbrt/util/error.cpp ext/pbrt/util/file.cpp ext/pbrt/util/float.cpp ext/pbrt/util/gui.cpp ext/pbrt/util/image.cpp ext/pbrt/util/log.cpp ext/pbrt/util/loopsubdiv.cpp ext/pbrt/util/lowdiscrepancy.cpp ext/pbrt/util/math.cpp ext/pbrt/util/memory.cpp ext/pbrt/util/mesh.cpp ext/pbrt/util/mipmap.cpp ext/pbrt/util/noise.cpp ext/pbrt/util/parallel.cpp ext/pbrt/util/primes.cpp ext/pbrt/util/print.cpp ext/pbrt/util/progressreporter.cpp ext/pbrt/util/pstd.cpp ext/pbrt/util/rng.cpp ext/pbrt/util/sampling.cpp ext/pbrt/util/scattering.cpp ext/pbrt/util/sobolmatrices.cpp ext/pbrt/util/spectrum.cpp ext/pbrt/util/stats.cpp ext/pbrt/util/stbimage.cpp ext/pbrt/util/string.cpp ext/pbrt/util/transform.cpp ext/pbrt/util/vecmath.cpp 
OBJECTS=$(SOURCES:.cpp=.o) 

# Make the shared object
all: $(SHLIB)

## Clean up object files:
clean:
	@rm -f $(OBJECTS)
